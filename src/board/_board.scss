@use '../base';
@use 'sass:math';
@use 'sass:map';

#fott-board {
  --boardScale: var(--leftColumnScale);
  --tokenScale: var(--leftColumnScale);
  --cardScale: var(--boardScale);
  --iconScale: var(--boardScale);
  --tileScale: var(--leftColumnScale) * var(--tileSizeMultiplier);
  min-width: 100%;
  padding-top: calc(var(--boardScale) * 40px);

  // background-color: yellow;
  // width: calc(var(--boardScale) * 2000px);

  #fott-tiles {
    // width: calc(var(--boardScale) * 2000px);
    display: flex;
    flex-wrap: nowrap;
    flex-direction: row;
    gap: calc(var(--boardScale) * 8px);
    padding: calc(var(--boardScale) * 4px);
    width: calc(var(--leftColumnScale) * 2080px);
    margin-bottom: calc(var(--boardScale) * 56px);
  }
}

.fott-tile {
  position: relative;
  width: calc(var(--tileScale) * 200px);
  aspect-ratio: 502 / 501;
  background-image: url('img/tiles.jpg');
  background-size: 500% 200%;
  // outline: solid calc(var(--boardScale) * 4px) yellow;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;

  .fott-animal-container {
    transition: top 500ms ease-in-out, left 500ms ease-in-out;
  }

  // --tokenScale: var(--tileScale) * 1.5;
}

.fott-action-token-slot {
  position: absolute;
  width: 100%;
  left: 0;
  bottom: calc(var(--tileScale) * -66px);
  height: calc(var(--tokenScale) * 81px);
  // background-color: yellow;
}

.fott-tile.selectable {
  cursor: pointer;
  outline: solid calc(var(--tileScale) * 4px) base.$selectable-color;
}

.fott-tile.selectable:hover,
.fott-tile.selected {
  cursor: pointer;
  outline: solid calc(var(--tileScale) * 4px) base.$selected-color;
}

#fott-set-aside-standees {
  margin-left: 8px;
  position: relative;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  height: calc(var(--tokenScale) * 107px);
  justify-content: flex-start;

  .fott-animal-container {
    top: 0px !important;
    left: 0px !important;
  }
}

$tiles: (
  1: 'Farm',
  2: 'Tile01',
  3: 'Tile02',
  4: 'Tile03',
  5: 'Tile04',
  6: 'Tile05',
  7: 'Tile06',
  8: 'Tile07',
  9: 'Tile08',
  10: 'LairOfPredators',
);

@for $i from 1 through 10 {
  .fott-tile[data-tile-id='#{map.get($tiles,$i)}'] {
    background-position-x: math.div((($i - 1) % 5 * 100%), 4);
    background-position-y: math.div(math.floor(calc(($i - 1) / 5)) * 100%, 1);
  }
}

.fott-animal-container {
  position: relative;
  width: calc(var(--tokenScale) * 100px);
  aspect-ratio: 375 / 400;
}

.fott-animal {
  width: calc(var(--tokenScale) * 100px);
  aspect-ratio: 375 / 400;
  background-image: url('img/animals.png');
  background-size: 400% 200%;
  transition: tranform 1s;
}

.fott-animal[data-facing='right'] {
  transform: scaleX(-1);
}

// .fott-animal[data-type='Predator'][data-phase='2'] {
//   transform: scaleX(-1);
// }

.fott-animal.card-side {
  box-shadow: none !important;
}

$animals: (
  1: 'Bear',
  2: 'Chicken',
  3: 'Cow',
  4: 'Fox',
  5: 'Goat',
  6: 'Pig',
  7: 'Tiger',
  8: 'Wolf',
);

@for $i from 1 through 8 {
  .fott-animal[data-animal='#{map.get($animals,$i)}'] {
    background-position-x: math.div((($i - 1) % 4 * 100%), 3);
    background-position-y: math.div(math.floor(calc(($i - 1) / 4)) * 100%, 1);
  }
}

.fott-animal-container.selectable {
  .fott-animal {
    cursor: pointer;
    filter: drop-shadow(2px 0px 0px base.$selectable-color)
      drop-shadow(-2px 0px 0px base.$selectable-color)
      drop-shadow(0px 2px 0px base.$selectable-color)
      drop-shadow(0px -2px 0px base.$selectable-color);
  }
}

.fott-animal-container.selectable:hover,
.fott-animal-container.selected {
  .fott-animal {
    cursor: pointer;
    filter: drop-shadow(2px 0px 0px base.$selected-color)
      drop-shadow(-2px 0px 0px base.$selected-color)
      drop-shadow(0px 2px 0px base.$selected-color)
      drop-shadow(0px -2px 0px base.$selected-color);
  }
}
